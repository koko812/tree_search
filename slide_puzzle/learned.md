## このセッションで学んだこと

- `bfs.py` や `bfs_deque.py` で 4×4 パズルを探索すると、分岐数が急激に膨らみキューが解ける前にメモリ・時間が尽きることを体感した。実際に履歴ファイル `history.pkl` にも指数的に増える状態が蓄積され、現実的な完走は不可能だと確認した。
- `a_star.py` では BFS を A* に置き換え、マンハッタン距離ヒューリスティックを優先度に加えることで、探索の枝刈りが効き平均探索ノード数が大幅に減った。その結果、同じ初期盤面でも数十秒以内にゴールへ到達できることを確認した。
- 状態管理を単なるリスト参照ではなく辞書・`@dataclass` 的な構造に整理すべきだと痛感した。`solver.py` の改修案として、タイル配置・空白位置・累積コストを明示的なキーを持つオブジェクトで扱えば、属性追加時にインデックスがずれる問題を避けられる。
- `PuzzleState` クラス（案）に `apply(move)` や `neighbors()` を持たせ、`Move` を `Enum` で表現すると、状態遷移ロジックと探索アルゴリズム (`AStarSolver`) の責務を分離でき、テストも `check_history.py` から個別メソッド単位で書きやすくなる。
- 各状態に `path` や `parent` を付けておくと、A* が返した最終状態から実行した手順を復元できる。これにより、「どの操作列で解が得られたか」「探索途中でどれだけ戻ったか」を後から検証する基盤が整う。
- 人間が 4×4 パズルを段階的に解く戦略（上段→左列の順に固定し、最後は 2×3 のブロックを 3 サイクルで調整する）が、プログラム上でも階層化した状態遷移ルールとして導入できると気づいた。ヒューリスティックを改良する際の指針として活用できる。
